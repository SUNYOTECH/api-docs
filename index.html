<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["javascript","coffeescript","php","python","elixir","ruby","java","go"]);
        });
      </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-60548656-1', 'docs.stampery.com');
      ga('set', 'contentGroup1', 'My Group Name'); 
      ga('send', 'pageview');

    </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="logo_container">
        <img src="images/logo.svg" />
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="coffeescript">coffeescript</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="elixir">elixir</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="go">go</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://api-dashboard.stampery.com/signup' target="_blank" class='signup'>Sign up</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<blockquote>
<p>You can get the latest version of the <strong>Stampery API</strong> client library for your preferred language on GitHub:</p>

<ul>
<li>Node.js → <a href="https://github.com/stampery/node">https://github.com/stampery/node</a></li>
<li>PHP     → <a href="https://github.com/stampery/php">https://github.com/stampery/php</a></li>
<li>Python  → <a href="https://github.com/stampery/python">https://github.com/stampery/python</a></li>
<li>Ruby    → <a href="https://github.com/stampery/ruby">https://github.com/stampery/ruby</a></li>
<li>Elixir  → <a href="https://github.com/stampery/elixir">https://github.com/stampery/elixir</a></li>
<li>Java    → <a href="https://github.com/stampery/java">https://github.com/stampery/java</a></li>
<li>Go    → <a href="https://github.com/stampery/go">https://github.com/stampery/go</a></li>
</ul>
</blockquote>

<p>This is the documentation for version 3 of the <strong>Stampery API</strong>, the industrial-scale data certification platform.</p>

<p>With the Stampery API you can certify a virtually <strong>unlimited</strong> amount of datasets or files by embedding their unique identifiers into both the <strong>Bitcoin</strong> and <strong>Ethereum</strong> public blockchains.</p>

<p>For every certification and blockchain, you get a receipt document called <strong>proof</strong> that allows you to prove the timestamped <strong>existence</strong>, <strong>integrity</strong> and <strong>ownership</strong> of the certified data.</p>

<p>Client libraries are available for <strong>NodeJS</strong>, <strong>PHP</strong>, <strong>Python</strong>, <strong>Ruby</strong>, <strong>Elixir</strong>, <strong>Java</strong> and <strong>Go</strong>.</p>

<p>You can view code examples across this documentation in the dark area to the right, and switch between different programming languages with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>
<pre class="highlight javascript"><code><span class="nx">stampery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stampery</span><span class="p">(</span><span class="s1">'367c6ec2-5791-4cf5-8094-4bae00c639b4'</span><span class="p">);</span>
</code></pre>
<pre class="highlight coffeescript"><code><span class="nx">stampery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stampery</span> <span class="s">'367c6ec2-5791-4cf5-8094-4bae00c639b4'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?</span>
<span class="nv">$stampery</span> <span class="o">=</span> <span class="k">include</span><span class="p">(</span><span class="s1">'stampery.inc.php'</span><span class="p">);</span>
<span class="nv">$stampery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stampery</span><span class="p">(</span><span class="s1">'830fa1bf-bee7-4412-c1d3-31dddba2213d'</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">from</span> <span class="nn">stampery</span> <span class="kn">import</span> <span class="n">Stampery</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Stampery</span><span class="p">(</span><span class="s">'2d4cdee7-38b0-4a66-da87-c1ab05b43768'</span><span class="p">,</span> <span class="s">'prod'</span><span class="p">)</span>
</code></pre>
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MyStampingModule</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">Stampery</span><span class="p">,</span> <span class="p">{</span><span class="sd">"</span><span class="s2">2d4cdee7-38b0-4a66-da87-c1ab05b43768"</span><span class="p">,</span> <span class="ss">:prod</span><span class="p">}</span>

  <span class="k">def</span> <span class="n">on_ready</span> <span class="k">do</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">on_proof</span><span class="p">(</span><span class="n">proof</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="n">on_error</span><span class="p">(</span><span class="n">error</span><span class="p">)</span> <span class="k">do</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">MyStampingModule</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'stampery'</span>
<span class="n">stampery</span> <span class="o">=</span> <span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="s1">'2d4cdee7-38b0-4a66-da87-c1ab05b43768'</span>
</code></pre>
<pre class="highlight java"><code><span class="kn">import</span> <span class="nn">com.stampery.Stampery</span><span class="o">;</span>

<span class="n">Stampery</span> <span class="n">stampery</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Stampery</span><span class="o">(</span><span class="s">"2d4cdee7-38b0-4a66-da87-c1ab05b43768"</span><span class="o">);</span>
<span class="n">stampery</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="n">stampery</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre>
<pre class="highlight go"><code><span class="n">events</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">stampery</span><span class="o">.</span><span class="n">Login</span><span class="p">(</span><span class="s">"2d4cdee7-38b0-4a66-da87-c1ab05b43768"</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>Authentication is performed by using app-specific <strong>secret tokens</strong>.</p>

<p>You can signup and generate your own secret tokens with the <a href="https://api-dashboard.stampery.com">API dashboard</a>.</p>

<aside class="info">As a rule of thumb, you should use a single token for every application using our API. If you are running a distributed application, you should also use a different token for every instance or otherwise you may miss some proofs.</aside>

<h1 id="hashing">Hashing</h1>

<p>For your convenience, all our client libraries provide a hash function that takes any kind of string and directly outputs a hash digest ready to stamp.</p>

<h2 id="hashing">Hashing</h2>
<pre class="highlight javascript"><code><span class="nx">stampery</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="s2">"Hello world!"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">hash</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight coffeescript"><code><span class="nx">stampery</span><span class="p">.</span><span class="na">hash</span> <span class="s">"Hello world!"</span><span class="p">,</span> <span class="p">(</span><span class="nx">hash</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="nx">hash</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?</span>
<span class="nv">$digest</span> <span class="o">=</span> <span class="nv">$stampery</span><span class="o">-&gt;</span><span class="na">hash</span><span class="p">(</span><span class="s2">"Hello world!"</span><span class="p">);</span>
<span class="k">echo</span><span class="p">(</span><span class="nb">hash</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">digest</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="nb">hash</span><span class="p">(</span><span class="s">"Hello world!"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span>
</code></pre>
<pre class="highlight elixir"><code><span class="n">digest</span> <span class="o">=</span> <span class="no">MyStampingModule</span><span class="o">.</span><span class="n">hash</span><span class="p">(</span><span class="sd">"</span><span class="s2">Hello world!"</span><span class="p">)</span>
<span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="n">digest</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">digest</span> <span class="o">=</span> <span class="n">stampery</span><span class="p">.</span><span class="nf">hash</span> <span class="s2">"Hello world!"</span>

</code></pre>
<pre class="highlight java"><code><span class="n">digest</span> <span class="o">=</span> <span class="n">stampery</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="s">"Hello world!"</span><span class="o">);</span>
</code></pre>
<pre class="highlight go"><code><span class="n">digest</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">stampery</span><span class="o">.</span><span class="n">Hash</span><span class="p">(</span><span class="s">"Hello world!"</span><span class="p">)</span><span class="x">
</span></code></pre>

<h1 id="stamping">Stamping</h1>

<h2 id="stamping-a-hash">Stamping a hash</h2>
<pre class="highlight javascript"><code><span class="nx">stampery</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'proof'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Received proof for hash '</span> <span class="o">+</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">stampery</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">digest</span><span class="p">);</span>
</code></pre>
<pre class="highlight coffeescript"><code><span class="nx">stampery</span><span class="p">.</span><span class="na">on</span> <span class="s">'proof'</span><span class="p">,</span> <span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="s">"Received proof for hash </span><span class="si">#{</span><span class="nx">hash</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="nx">proof</span>

<span class="nx">stampery</span><span class="p">.</span><span class="na">stamp</span> <span class="nx">digest</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?</span>
<span class="nv">$stampery</span><span class="o">-&gt;</span><span class="na">stamp</span><span class="p">(</span><span class="nv">$digest</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="n">client</span><span class="o">.</span><span class="n">stamp</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span>
</code></pre>
<pre class="highlight elixir"><code><span class="no">Stampery</span><span class="o">.</span><span class="n">stamp</span> <span class="n">digest</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">stampery</span><span class="p">.</span><span class="nf">stamp</span> <span class="n">digest</span>
</code></pre>
<pre class="highlight java"><code><span class="n">stampery</span><span class="o">.</span><span class="na">stamp</span><span class="o">(</span><span class="n">digest</span><span class="o">);</span>
</code></pre>
<pre class="highlight go"><code><span class="n">stampery</span><span class="o">.</span><span class="n">Stamp</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span><span class="x">
</span></code></pre>

<p>Our API is capable of stamping <strong>SHA3-512 (FIPS-202)</strong> hashes directly.</p>

<p>For stamping a SHA3-512 hash, you only have to make a call to the <code class="prettyprint">stamp</code> method of our API, as seen in the examples to the right.</p>

<aside class="info"><strong>SHA3</strong>, a subset of <strong>Keccak</strong>, is the last version of the SHA family of cryptographic hash functions.<br />Our API uses a <strong>512</strong> bits output size, so the hexadecimal digest of all hashes will have a length of 128 characters.</aside>

<h2 id="stamping-a-file">Stamping a file</h2>
<pre class="highlight javascript"><code><span class="nx">stampery</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'proof'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Received proof for hash '</span> <span class="o">+</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="s1">'/etc/hosts'</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">stampery</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">stampery</span><span class="p">.</span><span class="nx">stamp</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight coffeescript"><code><span class="nx">stampery</span><span class="p">.</span><span class="na">on</span> <span class="s">'proof'</span><span class="p">,</span> <span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="s">"Received proof for hash </span><span class="si">#{</span><span class="nx">hash</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="nx">proof</span>

<span class="nx">fs</span><span class="p">.</span><span class="na">readFile</span> <span class="s">'/etc/hosts'</span><span class="p">,</span> <span class="s">'utf8'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">stampery</span><span class="p">.</span><span class="na">hash</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">stampery</span><span class="p">.</span><span class="na">stamp</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?</span>
<span class="nv">$stampery</span><span class="o">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'proof'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">){</span>
 <span class="k">echo</span><span class="p">(</span><span class="s2">"Received proof for hash"</span> <span class="o">.</span> <span class="nv">$hash</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">);</span>
 <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$proof</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$file</span> <span class="o">=</span> <span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'/path/to/file.txt'</span><span class="p">);</span>
<span class="nv">$digest</span> <span class="o">=</span> <span class="nv">$stampery</span><span class="o">-&gt;</span><span class="na">hash</span><span class="p">(</span><span class="nv">$file</span><span class="p">);</span>
<span class="nv">$stampery</span><span class="o">-&gt;</span><span class="na">stamp</span><span class="p">(</span><span class="nv">$digest</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="k">def</span> <span class="nf">on_proof</span><span class="p">(</span><span class="nb">hash</span><span class="p">,</span> <span class="n">proof</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Received proof for "</span> <span class="o">+</span> <span class="nb">hash</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">proof</span><span class="p">)</span>

<span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">"/path/to/file.txt"</span><span class="p">)</span>
<span class="n">digest</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="nb">hash</span><span class="p">(</span><span class="nb">file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">client</span><span class="o">.</span><span class="n">stamp</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span>
</code></pre>
<pre class="highlight elixir"><code><span class="k">defmodule</span> <span class="no">MyStampingModule</span> <span class="k">do</span>
  <span class="kn">use</span> <span class="no">Stampery</span><span class="p">,</span> <span class="p">{</span><span class="sd">"</span><span class="s2">2d4cdee7-38b0-4a66-da87-c1ab05b43768"</span><span class="p">,</span> <span class="ss">:prod</span><span class="p">}</span>

  <span class="k">def</span> <span class="n">on_proof</span><span class="p">(</span><span class="n">proof</span><span class="p">)</span> <span class="k">do</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">puts</span><span class="p">(</span><span class="sd">"</span><span class="s2">Received proof for hash </span><span class="si">#{</span><span class="n">inspect</span> <span class="n">proof</span><span class="o">.</span><span class="n">hash</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="no">IO</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="n">proof</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="p">{</span><span class="ss">:ok</span><span class="p">,</span> <span class="n">data</span><span class="p">}</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="sd">"</span><span class="s2">/path/to/file.txt"</span><span class="p">)</span>
<span class="n">digest</span> <span class="o">=</span> <span class="no">Stampery</span><span class="o">.</span><span class="n">hash</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="no">MyStampingModule</span><span class="o">.</span><span class="n">stamp</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="n">stampery</span><span class="p">.</span><span class="nf">on</span> <span class="ss">:proof</span> <span class="k">do</span> <span class="o">|</span><span class="nb">hash</span><span class="p">,</span> <span class="n">proof</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s1">'Received proof for'</span>
  <span class="nb">puts</span> <span class="nb">hash</span>
  <span class="nb">puts</span> <span class="s1">'Proof'</span>
  <span class="nb">puts</span> <span class="n">proof</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>

<span class="n">data</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span> <span class="s2">"/path/to/file.txt"</span>
<span class="n">digest</span> <span class="o">=</span> <span class="n">stampery</span><span class="p">.</span><span class="nf">hash</span> <span class="n">data</span>
<span class="n">stampery</span><span class="p">.</span><span class="nf">stamp</span> <span class="n">digest</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// the following code should be inside a class that implements our Consumer interface</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onProof</span><span class="p">(</span><span class="n">String</span> <span class="n">hash</span><span class="o">,</span> <span class="n">Proof</span> <span class="n">proof</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">hash</span><span class="o">);</span>
  <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">proof</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onReady</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">file</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
  <span class="k">try</span><span class="o">{</span>
    <span class="n">file</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">Files</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">(</span><span class="n">Paths</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/path/to/file.txt"</span><span class="o">)));</span>
  <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">){</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="n">String</span> <span class="n">digest</span> <span class="o">=</span> <span class="n">stampery</span><span class="o">.</span><span class="na">hash</span><span class="o">(</span><span class="n">file</span><span class="o">);</span>
  <span class="n">stampery</span><span class="o">.</span><span class="na">stamp</span><span class="o">(</span><span class="n">digest</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<pre class="highlight go"><code><span class="k">for</span><span class="x"> </span><span class="n">event</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">events</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">switch</span><span class="x"> </span><span class="n">event</span><span class="o">.</span><span class="n">Type</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">case</span><span class="x"> </span><span class="s">"ready"</span><span class="o">:</span><span class="x">
    </span><span class="n">data</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="s">"/path/to/file.txt"</span><span class="p">)</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">log</span><span class="o">.</span><span class="n">Fatalf</span><span class="p">(</span><span class="s">"Error %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="n">digest</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">stampery</span><span class="o">.</span><span class="n">Hash</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="x">
    </span><span class="n">stampery</span><span class="o">.</span><span class="n">Stamp</span><span class="p">(</span><span class="n">digest</span><span class="p">)</span><span class="x">

  </span><span class="k">case</span><span class="x"> </span><span class="s">"proof"</span><span class="o">:</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Proof"</span><span class="p">)</span><span class="x">
    </span><span class="n">p</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">event</span><span class="o">.</span><span class="n">Data</span><span class="o">.</span><span class="p">(</span><span class="n">stampery</span><span class="o">.</span><span class="n">Proof</span><span class="p">)</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Hash: "</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Hash</span><span class="p">)</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Version: %v</span><span class="se">\n</span><span class="s">Siblings: %v</span><span class="se">\n</span><span class="s">Root: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Version</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Siblings</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Root</span><span class="p">)</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Anchor:</span><span class="se">\n</span><span class="s">  Chain: %v</span><span class="se">\n</span><span class="s">  Tx: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Anchor</span><span class="o">.</span><span class="n">Chain</span><span class="p">,</span><span class="x"> </span><span class="n">p</span><span class="o">.</span><span class="n">Anchor</span><span class="o">.</span><span class="n">Tx</span><span class="p">)</span><span class="x">

  </span><span class="k">case</span><span class="x"> </span><span class="s">"error"</span><span class="o">:</span><span class="x">
    </span><span class="n">log</span><span class="o">.</span><span class="n">Fatalf</span><span class="p">(</span><span class="s">"%v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">event</span><span class="o">.</span><span class="n">Data</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre>

<p>Stamping a file is just as easy as obtaining its <strong>SHA3-512</strong> hash and then stamping the hash as explained in the previous section.</p>

<p>For your convenience, all our client libraries include a function for hashing files as seen in the examples to the right.</p>

<h1 id="proofs">Proofs</h1>

<h2 id="about-proofs">About proofs</h2>

<p>Proofs are <strong>JSON</strong> documents proving that a certain file or dataset has been anchored to a certain public blockchain.</p>

<p>Anyone holding the original data and its corresponding proof can verify the certification by following the proving process described <a href="#checking-a-proof-proving">here</a>.</p>

<h2 id="proof-format">Proof format</h2>

<p>This is the structure of a proof:</p>

<aside class="info">[v, s, r, [c, t]]</aside>

<p>Where <code class="prettyprint">v</code>, <code class="prettyprint">s</code>, <code class="prettyprint">r</code>, <code class="prettyprint">c</code> and <code class="prettyprint">t</code> are:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Description</th>
<th>Value type</th>
</tr>
</thead><tbody>
<tr>
<td>v</td>
<td>BTA version used.</td>
<td>Integer(1)</td>
</tr>
<tr>
<td>s</td>
<td>Merkle siblings.</td>
<td>Array</td>
</tr>
<tr>
<td>r</td>
<td>Merkle root.</td>
<td>String(128)</td>
</tr>
<tr>
<td>c</td>
<td>Chain code.</td>
<td>Integer(1)</td>
</tr>
<tr>
<td>t</td>
<td>Transaction ID (txid)</td>
<td>String(64)</td>
</tr>
</tbody></table>

<p>Valid chain codes for <code class="prettyprint">c</code> are:</p>

<table><thead>
<tr>
<th>Value</th>
<th>Chain</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>Bitcoin livenet</td>
</tr>
<tr>
<td>2</td>
<td>Ethererum livenet</td>
</tr>
</tbody></table>

<h2 id="retrieving-missed-proofs">Retrieving missed proofs</h2>
<pre class="highlight javascript"><code><span class="nx">stampery</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'proof'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Received missed proof for hash '</span> <span class="o">+</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">stampery</span><span class="p">.</span><span class="nx">receiveMissedProofs</span><span class="p">();</span>
</code></pre>
<pre class="highlight coffeescript"><code><span class="nx">stampery</span><span class="p">.</span><span class="na">on</span> <span class="s">'proof'</span><span class="p">,</span> <span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="s">"Received missed proof for hash </span><span class="si">#{</span><span class="nx">hash</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="nx">proof</span>

<span class="nx">stampery</span><span class="p">.</span><span class="na">receiveMissedProofs</span><span class="p">()</span>
</code></pre>

<p>If you make a stamp and for some reason disconnect from our service right after, you will miss the proof.</p>

<p>Don&rsquo;t worry, <strong>missed proofs are queued in our servers for 24h</strong>, and you can retrieve them by making a simple call to the <code class="prettyprint">receiveMissedProofs</code> method.</p>

<h2 id="checking-a-proof-proving">Checking a proof (proving)</h2>
<pre class="highlight javascript"><code><span class="nx">stampery</span><span class="p">.</span><span class="nx">prove</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Proof validity:'</span><span class="p">,</span> <span class="nx">valid</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight coffeescript"><code><span class="nx">stampery</span><span class="p">.</span><span class="na">prove</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">proof</span><span class="p">,</span> <span class="p">(</span><span class="nx">valid</span><span class="p">)</span> <span class="o">-&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="na">log</span> <span class="s">'Proof validity:'</span><span class="p">,</span> <span class="nx">valid</span>
</code></pre>
<pre class="highlight elixir"><code><span class="no">MyStampingModule</span><span class="o">.</span><span class="n">prove</span><span class="p">(</span><span class="n">proof</span><span class="p">)</span>
</code></pre>

<p>We call <strong>proving</strong> to the process of verifying a proof is valid and therefore demonstrating that a hash or file has been undoubtfully embedded in the blockchain and it has not been tampered since then.</p>

<p>Proofs are independently verifiable by everyone in possesion of the hash or file and the proof itself.</p>

<p>The process of proving Stampery proofs made with the current version 5 of our BTA platform is made like this:</p>

<ol>
<li>Take the hash</li>
<li>Take first element in the Merkle siblings list <code class="prettyprint">s[0]</code></li>
<li>Concatenate both, putting the biggest of them in front</li>
<li>Hash the resulting string with <code class="prettyprint">SHA3-512</code></li>
<li>Take the resulting hash and the next element in the Merkle siblings list, concatenate like before and hash the resulting string</li>
<li>Repeat same process until there are no elements left in the Merkle siblings list</li>
<li>Check the resuting string matches the Merkle root of the proof, <code class="prettyprint">r</code></li>
<li>Take the transaction ID, <code class="prettyprint">t</code>, and paste in your favorite Bitcoin/Ethereum chain explorer</li>
<li>Check that the Merkle root, <code class="prettyprint">r</code>, matches the tail of the data embedded in the transaction</li>
</ol>

<p>If the checks in steps <strong>7</strong> and <strong>9</strong> pass, then you have proved that the proof is OK and the hash or file has not been tampered.</p>

          
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="coffeescript">coffeescript</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="elixir">elixir</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="go">go</a>
          </div>
      </div>
    </div>
  </body>
</html>
