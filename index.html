<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["php","python","javascript","shell"]);
        });
      </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-60548656-1', 'docs.stampery.com');
      ga('set', 'contentGroup1', 'My Group Name'); 
      ga('send', 'pageview');

    </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://stampery.com/signup'>Sign up to Stampery</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Stampery API! When you register you&rsquo;ll be able to see, create and delete API keys in your user panel.</p>

<p>We have language bindings in Shell, PHP, Python and JavaScript! (Ruby coming soon, feel free to start one if you want!) You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>

<h1 id="authentication">Authentication</h1>

<h2 id="authenticate-via-api-key">Authenticate via API key</h2>

<blockquote>
<p>To authenticate, use this code:</p>
</blockquote>
<pre class="highlight php"><code>$stampery = include('stampery.inc.php');
$stampery = new Stampery('stamperystampery');
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">stampery</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">stampery</span><span class="o">.</span><span class="n">Client</span><span class="p">(</span><span class="s">'stamperystampery'</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">Stampery</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'stampery'</span><span class="p">),</span>
    <span class="nx">stampery</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Stampery</span><span class="p">(</span><span class="s1">'stamperystampery'</span><span class="p">)</span>
</code></pre>
<pre class="highlight shell"><code>curl -XPOST -H <span class="s1">'Authorization: Basic &lt;base64 of "user:pass"&gt;'</span> api.stampery.com/v2/&lt;endpoint&gt;
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">stamperystampery</code> with your client secret.</p>
</blockquote>

<p>Using your secret token, you can use it to authenticate using the libraries</p>

<h2 id="authenticate-via-username-and-password">Authenticate via username and password</h2>
<pre class="highlight shell"><code>curl -XPOST -H <span class="s2">"Content-type: application/json"</span> -d <span class="s1">'{"email":"your.email@provider.com", "password":"somepass"}'</span> <span class="s1">'https://api.stampery.com/v2/login'</span>
</code></pre>

<blockquote>
<p>Add OTP field if your account has OTP enabled</p>
</blockquote>

<h3 id="http-request">HTTP Request</h3>

<blockquote>
<p>JSON returned by this API endpoint</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"api_token"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token Name"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Client ID"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"secretToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Secret Token"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><code class="prettyprint">POST https://stampery.com/api/v2/login</code></p>

<h3 id="json-body">JSON body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Your username</td>
</tr>
<tr>
<td>password</td>
<td>Your password</td>
</tr>
<tr>
<td>otp</td>
<td>In case your account has an OTP token set, put it here</td>
</tr>
</tbody></table>

<h2 id="authenticate-via-http-header">Authenticate via HTTP header</h2>

<p>The Stampery API uses a token pair with a client ID and a client secret. You can authenticate with just the client secret (as seen in the PHP, Python and Node libraries) and username &amp; password. The method used is by sending an HTTP Authorization header with the client ID and the client secret, in the next way:</p>

<p><code class="prettyprint">Authorization: client_id:client_secret</code></p>

<aside class="notice">
You must replace <code>client_id:client_secret</code> with your key and secret.
</aside>

<h1 id="stamps">Stamps</h1>

<h2 id="retrieve-a-specific-stamps">Retrieve a specific stamps</h2>
<pre class="highlight php"><code>$stampery-&gt;get($hash);
</code></pre>
<pre class="highlight python"><code><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">hash</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="nx">stampery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">hash</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">stamp</span><span class="p">)</span> <span class="p">{</span> <span class="p">})</span>
</code></pre>
<pre class="highlight shell"><code>curl -XGET -H <span class="s2">"Content-type: application/json"</span> <span class="s1">'https://api.stampery.com/v2/stamps/:hash'</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"v"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"owners"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"owner1@email.com"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Owner 1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1024"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ImportantContract.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c65e0cc54186376e5026e16c5c59f8ef69dd745d29fc743b8033b6bcd1fc88d6"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"proof"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6f064f4f5b5041d24e8e43a5bba7e81367d435709ba473c578dc2b4b1b8ddb0"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"merkleIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"merkleSiblings"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"7dc47952c0bc99f61ee863018f52711d0ac4031afb1578db6cc3e9c990d1172b"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"0fff49490d879d809cb1f57972beb9f3293f7509cd8bd4eb02986a0eca4adb10"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"eea53b2e51b72781c95e87f3c98741ca1bc1196bd7bf700c3fb06ebce1af3382"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"fef2371e7183475b7b181459d831a62380f4c03d4ff38b5e216ea7d3c3f44f13"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"9eba1796584f80b7f22b648e37423f6bceeb4d06a278b8981c34ef09e1cfe57a"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"5604dc31a496b7cf0cbcf7b5d22a6a3f5f23b70bbfa681b0c53214f8fea3d913"</span><span class="p">,</span><span class="w">
      </span><span class="mi">0</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"merkleRoot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fe4354290480da434e25b3f614bc9953ed41b3fd2799db821b1f1317323ea2ba"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"txid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"31f410d6843496300382a6b001a482e21d20f111bf781bd695d8ffe0e46cd4b8"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves a stamp providing the hash.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://stampery.com/api/v2/stamps/:hash</code></p>

<h2 id="stamp-data">Stamp data</h2>
<pre class="highlight php"><code>$data = array( 'str' =&gt; 'Create a proof of this using the blockchain' );

$stampery-&gt;stamp($data);
</code></pre>
<pre class="highlight python"><code><span class="n">s</span><span class="o">.</span><span class="n">stamp</span><span class="p">({</span><span class="s">'str'</span><span class="p">:</span> <span class="s">'Create a proof of this using the blockchain'</span><span class="p">})</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span> <span class="na">str</span><span class="p">:</span> <span class="s1">'Create a proof of this using the blockchain'</span> <span class="p">}</span>

<span class="nx">stampery</span><span class="p">.</span><span class="nx">stamp</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">hash</span><span class="p">)</span> <span class="p">{</span> <span class="p">})</span>
</code></pre>
<pre class="highlight shell"><code>curl -XPOST -H <span class="s1">'Authorization: Basic &lt;base64 of "user:pass"&gt;'</span> -H <span class="s2">"Content-type: application/json"</span> -d <span class="s1">'{"some":"data"}'</span> <span class="s1">'https://api.stampery.com/v2/stamps'</span>
</code></pre>

<blockquote>
<p>The above command returns a JSON object with the proof&rsquo;s hash:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6f064f4f5b5041d24e8e43a5bba7e81367d43709ba473c578dc2b4b1b8ddb0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="warning">In order to stamp you need to be authenticated with a client secret key</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://stampery.com/api/v2/stamps</code></p>

<h3 id="json-body">JSON body</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>The data to stamp (totally arbitrary as long as it&rsquo;s valid JSON)</td>
</tr>
</tbody></table>

<h2 id="stamp-a-file">Stamp a file</h2>
<pre class="highlight php"><code>$data = array();
$file = fopen('document.txt', 'r');

$stampery-&gt;stamp($data, $file);
</code></pre>
<pre class="highlight python"><code><span class="nb">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/Users/user/Desktop/Artboard 2.png'</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span>

<span class="n">s</span><span class="o">.</span><span class="n">stamp</span><span class="p">({</span><span class="s">'meta'</span><span class="p">:</span> <span class="s">'data'</span><span class="p">},</span> <span class="nb">file</span><span class="p">)</span>
</code></pre>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'document.txt'</span><span class="p">)</span>

<span class="nx">stampery</span><span class="p">.</span><span class="nx">stamp</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">file</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">hash</span><span class="p">)</span> <span class="p">{</span> <span class="p">})</span>
</code></pre>
<pre class="highlight shell"><code>curl -XPOST -H <span class="s2">"Content-Type:multipart/form-data"</span> -H <span class="s2">"Authorization: Basic &lt;base64 of "</span>user:pass<span class="s2">"&gt;"</span> -F <span class="s2">"file=@file"</span> https://stampery.com/api/v2/stamps
</code></pre>

<blockquote>
<p>The above command returns a JSON object with the proof&rsquo;s hash:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e6f064f4f5b5041d24e8e43a5ba7e81367d435709ba473c578dc2b4b1b8ddb0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="warning">In order to stamp you need to be authenticated with a client secret key</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://stampery.com/api/v2/stamps</code></p>

<p>This will be a multipart form, sending the file as the <code class="prettyprint">file</code> parameter:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>Extra metadata for the file (not needed to stamp a file)</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>404</td>
<td>Stamp not found</td>
</tr>
<tr>
<td>408</td>
<td>Payment needed &ndash; your free account has reached the limits</td>
</tr>
<tr>
<td>409</td>
<td>Duplicated &ndash; the stamp is duplicated</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
